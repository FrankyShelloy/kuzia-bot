# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ maxapi

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è maxapi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        h1 {
            color: #4a5568;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: #718096;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .toc {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .toc h2 {
            color: #4a5568;
            margin-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }

        .toc-columns {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .toc-section {
            margin-bottom: 20px;
        }

        .toc-section h3 {
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .toc-section ul {
            list-style: none;
        }

        .toc-section li {
            margin-bottom: 6px;
        }

        .toc-section a {
            color: #4a5568;
            text-decoration: none;
            padding: 4px 8px;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: block;
            font-size: 0.9em;
        }

        .toc-section a:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .section h2 {
            color: #4a5568;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #4a5568;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        .section h4 {
            color: #4a5568;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            border-left: 4px solid #667eea;
            font-size: 0.9em;
        }

        .code-comment {
            color: #a0aec0;
        }

        .code-keyword {
            color: #f56565;
        }

        .code-function {
            color: #68d391;
        }

        .code-string {
            color: #f6e05e;
        }

        .code-class {
            color: #63b3ed;
        }

        .code-param {
            color: #b794f4;
        }

        .note {
            background: #fed7d7;
            border-left: 4px solid #f56565;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .info {
            background: #bee3f8;
            border-left: 4px solid #3182ce;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .warning {
            background: #fefcbf;
            border-left: 4px solid #d69e2e;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .success {
            background: #c6f6d5;
            border-left: 4px solid #38a169;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            font-size: 0.9em;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background: #f7fafc;
        }

        .method-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .method-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #667eea;
        }

        .method-name {
            color: #4a5568;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
        }

        .method-desc {
            color: #718096;
            font-size: 0.9em;
        }

        .param-table {
            font-size: 0.85em;
        }

        .param-table th {
            background: #e2e8f0;
            color: #4a5568;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: bold;
            margin-right: 8px;
        }

        .badge-new {
            background: #68d391;
            color: white;
        }

        .badge-important {
            background: #f56565;
            color: white;
        }

        .badge-warning {
            background: #ed8936;
            color: white;
        }

        .badge-info {
            background: #4299e1;
            color: white;
        }

        .api-method {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }

        .api-signature {
            background: #2d3748;
            color: white;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .toc-columns {
                grid-template-columns: 1fr;
            }
            
            .method-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è maxapi</h1>
            <p class="subtitle">–ò—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –±–æ—Ç–æ–≤ –¥–ª—è MAX</p>
        </header>

        <div class="toc">
            <h2>üìë –ü–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</h2>
            <div class="toc-columns">
                <div class="toc-section">
                    <h3>üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã</h3>
                    <ul>
                        <li><a href="#installation">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</a></li>
                        <li><a href="#quickstart">–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</a></li>
                        <li><a href="#project-structure">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</a></li>
                        <li><a href="#configuration">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</a></li>
                    </ul>
                </div>
                <div class="toc-section">
                    <h3>üéØ –û—Å–Ω–æ–≤—ã</h3>
                    <ul>
                        <li><a href="#handlers">–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π</a></li>
                        <li><a href="#filters">–§–∏–ª—å—Ç—Ä—ã (MagicFilter)</a></li>
                        <li><a href="#keyboard">–ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã</a></li>
                        <li><a href="#states">–°–æ—Å—Ç–æ—è–Ω–∏—è (States)</a></li>
                        <li><a href="#memory-context">–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–∞–º—è—Ç–∏</a></li>
                    </ul>
                </div>
                <div class="toc-section">
                    <h3>üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</h3>
                    <ul>
                        <li><a href="#routers">–†–æ—É—Ç–µ—Ä—ã</a></li>
                        <li><a href="#middleware">Middleware</a></li>
                        <li><a href="#dependency-injection">DI –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</a></li>
                        <li><a href="#error-handling">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</a></li>
                    </ul>
                </div>
                <div class="toc-section">
                    <h3>üåê –í–µ–±—Ö—É–∫–∏ –∏ –¥–µ–ø–ª–æ–π</h3>
                    <ul>
                        <li><a href="#webhook">–í–µ–±—Ö—É–∫–∏</a></li>
                        <li><a href="#deployment">–î–µ–ø–ª–æ–π</a></li>
                        <li><a href="#scaling">–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li>
                        <li><a href="#monitoring">–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</a></li>
                    </ul>
                </div>
                <div class="toc-section">
                    <h3>ü§ñ API Reference</h3>
                    <ul>
                        <li><a href="#bot-methods">–ú–µ—Ç–æ–¥—ã –±–æ—Ç–∞</a></li>
                        <li><a href="#events">–°–æ–±—ã—Ç–∏—è</a></li>
                        <li><a href="#types">–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö</a></li>
                        <li><a href="#attachments">–í–ª–æ–∂–µ–Ω–∏—è</a></li>
                    </ul>
                </div>
                <div class="toc-section">
                    <h3>‚ö° –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ–º—ã</h3>
                    <ul>
                        <li><a href="#testing">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li>
                        <li><a href="#security">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</a></li>
                        <li><a href="#performance">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</a></li>
                        <li><a href="#best-practices">Best Practices</a></li>
                    </ul>
                </div>
                <div class="toc-section">
                    <h3>üîß –£—Ç–∏–ª–∏—Ç—ã</h3>
                    <ul>
                        <li><a href="#logging">–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li>
                        <li><a href="#utils">–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã</a></li>
                        <li><a href="#migration">–ú–∏–≥—Ä–∞—Ü–∏–∏</a></li>
                        <li><a href="#troubleshooting">–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ -->
        <div id="installation" class="section">
            <h2>‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</h2>
            
            <h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏</h3>
            <div class="code-block">
                <span class="code-comment"># –ë–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞</span><br>
                pip install maxapi<br>
                <br>
                <span class="code-comment"># –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏</span><br>
                pip install maxapi[webhook]  <span class="code-comment"># –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤</span><br>
                pip install maxapi[all]      <span class="code-comment"># –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</span><br>
                pip install maxapi[dev]      <span class="code-comment"># –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</span>
            </div>

            <h3>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è</h3>
            <table>
                <thead>
                    <tr>
                        <th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th>
                        <th>–í–µ—Ä—Å–∏—è</th>
                        <th>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</th>
                        <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Python</td>
                        <td>‚â• 3.8</td>
                        <td>‚úÖ</td>
                        <td>–û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è</td>
                    </tr>
                    <tr>
                        <td>aiohttp</td>
                        <td>‚â• 3.8.0</td>
                        <td>‚úÖ</td>
                        <td>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã</td>
                    </tr>
                    <tr>
                        <td>pydantic</td>
                        <td>‚â• 2.0.0</td>
                        <td>‚úÖ</td>
                        <td>–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö</td>
                    </tr>
                    <tr>
                        <td>fastapi</td>
                        <td>‚â• 0.68.0</td>
                        <td>‚ùå (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</td>
                        <td>–î–ª—è —Ä–∞–±–æ—Ç—ã –≤–µ–±—Ö—É–∫–æ–≤</td>
                    </tr>
                    <tr>
                        <td>uvicorn</td>
                        <td>‚â• 0.15.0</td>
                        <td>‚ùå (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</td>
                        <td>ASGI —Å–µ—Ä–≤–µ—Ä –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤</td>
                    </tr>
                </tbody>
            </table>

            <h3>–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞</h3>
            <div class="info">
                <strong>–®–∞–≥–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞:</strong><br>
                1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ MAX<br>
                2. –ù–∞–π–¥–∏—Ç–µ @maximibot –∏ –Ω–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥<br>
                3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É <code>/start</code><br>
                4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞<br>
                5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ
            </div>

            <h3>–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏</h3>
            <div class="code-block">
                <span class="code-comment"># test_installation.py</span><br>
                <span class="code-keyword">import</span> maxapi<br>
                <span class="code-keyword">import</span> asyncio<br>
                <br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">test_bot</span>():<br>
                &nbsp;&nbsp;&nbsp;&nbsp;bot = maxapi.Bot(<span class="code-string">'YOUR_TOKEN'</span>)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;me = <span class="code-keyword">await</span> bot.get_me()<br>
                &nbsp;&nbsp;&nbsp;&nbsp;print(<span class="code-string">f"–ë–æ—Ç @{me.username} —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω!"</span>)<br>
                <br>
                <span class="code-keyword">if</span> __name__ == <span class="code-string">"__main__"</span>:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;asyncio.run(test_bot())
            </div>
        </div>

        <!-- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç -->
        <div id="quickstart" class="section">
            <h2>üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</h2>

            <h3>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –±–æ—Ç</h3>
            <div class="code-block">
                <span class="code-keyword">import</span> asyncio<br>
                <span class="code-keyword">import</span> logging<br>
                <span class="code-keyword">from</span> maxapi <span class="code-keyword">import</span> Bot, Dispatcher<br>
                <span class="code-keyword">from</span> maxapi.filters <span class="code-keyword">import</span> F<br>
                <span class="code-keyword">from</span> maxapi.types <span class="code-keyword">import</span> MessageCreated<br>
                <br>
                <span class="code-comment"># –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è</span><br>
                logging.basicConfig(<br>
                &nbsp;&nbsp;&nbsp;&nbsp;level=logging.INFO,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;format=<span class="code-string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span><br>
                )<br>
                <br>
                <span class="code-comment"># –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞</span><br>
                bot = Bot(<span class="code-string">'YOUR_BOT_TOKEN'</span>)<br>
                dp = Dispatcher()<br>
                <br>
                <span class="code-comment"># –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</span><br>
                @dp.<span class="code-function">message_created</span>(F.message.body.text)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">echo_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-string">f"–í—ã —Å–∫–∞–∑–∞–ª–∏: {event.message.body.text}"</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;)<br>
                <br>
                <span class="code-comment"># –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start</span><br>
                @dp.<span class="code-function">message_created</span>(F.message.body.text == <span class="code-string">"/start"</span>)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">start_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-string">"–ü—Ä–∏–≤–µ—Ç! –Ø —ç—Ö–æ-–±–æ—Ç. –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –º–Ω–µ —á—Ç–æ-–Ω–∏–±—É–¥—å."</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;)<br>
                <br>
                <span class="code-comment"># –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ polling</span><br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">main</span>():<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> dp.start_polling(bot)<br>
                <br>
                <span class="code-keyword">if</span> __name__ == <span class="code-string">'__main__'</span>:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;asyncio.run(main())
            </div>

            <div class="success">
                <strong>‚úÖ –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!</strong><br>
                –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ MAX. –í—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç.
            </div>
        </div>

        <!-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ -->
        <div id="project-structure" class="section">
            <h2>üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</h2>

            <h3>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-–±–æ—Ç–∞</h3>
            <div class="code-block">
                my_advanced_bot/<br>
                ‚îú‚îÄ‚îÄ app/<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ __init__.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ main.py                 <span class="code-comment"># –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ config.py              <span class="code-comment"># –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ bot.py                 <span class="code-comment"># –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ handlers/              <span class="code-comment"># –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ __init__.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ commands.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ messages.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ callbacks.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ errors.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ keyboards/             <span class="code-comment"># –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ __init__.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ main_menu.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ inline.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ middlewares/           <span class="code-comment"># –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ __init__.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ logging.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ throttling.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ routers/               <span class="code-comment"># –†–æ—É—Ç–µ—Ä—ã</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ __init__.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ admin.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ user.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ services/              <span class="code-comment"># –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ __init__.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ database.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ external_api.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ utils/                 <span class="code-comment"># –£—Ç–∏–ª–∏—Ç—ã</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ __init__.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ helpers.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ validators.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ models/                <span class="code-comment"># –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ __init__.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ user.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ chat.py<br>
                ‚îú‚îÄ‚îÄ tests/                     <span class="code-comment"># –¢–µ—Å—Ç—ã</span><br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ __init__.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ conftest.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ test_handlers.py<br>
                ‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ test_services.py<br>
                ‚îú‚îÄ‚îÄ migrations/                <span class="code-comment"># –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)</span><br>
                ‚îú‚îÄ‚îÄ docker/                    <span class="code-comment"># Docker —Ñ–∞–π–ª—ã</span><br>
                ‚îú‚îÄ‚îÄ requirements.txt<br>
                ‚îú‚îÄ‚îÄ Dockerfile<br>
                ‚îú‚îÄ‚îÄ docker-compose.yml<br>
                ‚îú‚îÄ‚îÄ .env.example<br>
                ‚îî‚îÄ‚îÄ README.md
            </div>

            <h3>–ü—Ä–∏–º–µ—Ä main.py –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞</h3>
            <div class="code-block">
                <span class="code-keyword">import</span> asyncio<br>
                <span class="code-keyword">import</span> logging<br>
                <span class="code-keyword">from</span> app.bot <span class="code-keyword">import</span> setup_bot<br>
                <span class="code-keyword">from</span> app.config <span class="code-keyword">import</span> config<br>
                <br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">main</span>():<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment"># –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;logging.basicConfig(<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;level=logging.INFO <span class="code-keyword">if</span> <span class="code-keyword">not</span> config.debug <span class="code-keyword">else</span> logging.DEBUG,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;format=<span class="code-string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment"># –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;bot, dp = <span class="code-keyword">await</span> setup_bot()<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment"># –ó–∞–ø—É—Å–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> config.webhook_url:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> dp.handle_webhook(<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bot, <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host=config.webhook_host, <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port=config.webhook_port<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">else</span>:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> dp.start_polling(bot)<br>
                <br>
                <span class="code-keyword">if</span> __name__ == <span class="code-string">'__main__'</span>:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">try</span>:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;asyncio.run(main())<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">except</span> KeyboardInterrupt:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="code-string">"–ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"</span>)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">except</span> Exception <span class="code-keyword">as</span> e:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.error(<span class="code-string">f"–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}"</span>)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise
            </div>
        </div>

        <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
        <div id="configuration" class="section">
            <h2>‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</h2>

            <h3>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ environment variables</h3>
            <div class="code-block">
                <span class="code-comment"># .env —Ñ–∞–π–ª</span><br>
                BOT_TOKEN=your_bot_token_here<br>
                DEBUG=false<br>
                WEBHOOK_URL=https://yourdomain.com/webhook<br>
                WEBHOOK_HOST=0.0.0.0<br>
                WEBHOOK_PORT=8080<br>
                REDIS_URL=redis://localhost:6379<br>
                DATABASE_URL=postgresql://user:pass@localhost/dbname<br>
                LOG_LEVEL=INFO<br>
                ADMIN_IDS=123456,789012
            </div>

            <h3>–ö–ª–∞—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</h3>
            <div class="code-block">
                <span class="code-keyword">import</span> os<br>
                <span class="code-keyword">from</span> dataclasses <span class="code-keyword">import</span> dataclass<br>
                <span class="code-keyword">from</span> typing <span class="code-keyword">import</span> List<br>
                <br>
                @dataclass<br>
                <span class="code-keyword">class</span> <span class="code-class">Config</span>:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;bot_token: str<br>
                &nbsp;&nbsp;&nbsp;&nbsp;debug: bool<br>
                &nbsp;&nbsp;&nbsp;&nbsp;webhook_url: str<br>
                &nbsp;&nbsp;&nbsp;&nbsp;webhook_host: str<br>
                &nbsp;&nbsp;&nbsp;&nbsp;webhook_port: int<br>
                &nbsp;&nbsp;&nbsp;&nbsp;redis_url: str<br>
                &nbsp;&nbsp;&nbsp;&nbsp;database_url: str<br>
                &nbsp;&nbsp;&nbsp;&nbsp;log_level: str<br>
                &nbsp;&nbsp;&nbsp;&nbsp;admin_ids: List[int]<br>
                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;@classmethod<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">def</span> <span class="code-function">from_env</span>(cls):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> cls(<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bot_token=os.getenv(<span class="code-string">"BOT_TOKEN"</span>),<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug=os.getenv(<span class="code-string">"DEBUG"</span>, <span class="code-string">"false"</span>).lower() == <span class="code-string">"true"</span>,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webhook_url=os.getenv(<span class="code-string">"WEBHOOK_URL"</span>, <span class="code-string">""</span>),<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webhook_host=os.getenv(<span class="code-string">"WEBHOOK_HOST"</span>, <span class="code-string">"0.0.0.0"</span>),<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webhook_port=int(os.getenv(<span class="code-string">"WEBHOOK_PORT"</span>, <span class="code-string">"8080"</span>)),<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redis_url=os.getenv(<span class="code-string">"REDIS_URL"</span>, <span class="code-string">"redis://localhost:6379"</span>),<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;database_url=os.getenv(<span class="code-string">"DATABASE_URL"</span>, <span class="code-string">""</span>),<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log_level=os.getenv(<span class="code-string">"LOG_LEVEL"</span>, <span class="code-string">"INFO"</span>),<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;admin_ids=[int(x) <span class="code-keyword">for</span> x <span class="code-keyword">in</span> os.getenv(<span class="code-string">"ADMIN_IDS"</span>, <span class="code-string">""</span>).split(<span class="code-string">","</span>) <span class="code-keyword">if</span> x]<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
                <br>
                <span class="code-comment"># –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</span><br>
                config = Config.from_env()
            </div>
        </div>

        <!-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π -->
        <div id="handlers" class="section">
            <h2>üéØ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π</h2>

            <h3>–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</h3>
            <table>
                <thead>
                    <tr>
                        <th>–î–µ–∫–æ—Ä–∞—Ç–æ—Ä</th>
                        <th>–¢–∏–ø —Å–æ–±—ã—Ç–∏—è</th>
                        <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                        <th>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>@dp.message_created</code></td>
                        <td><code>MessageCreated</code></td>
                        <td>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è</td>
                        <td>–û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π</td>
                    </tr>
                    <tr>
                        <td><code>@dp.message_edited</code></td>
                        <td><code>MessageEdited</code></td>
                        <td>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è</td>
                        <td>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π</td>
                    </tr>
                    <tr>
                        <td><code>@dp.message_removed</code></td>
                        <td><code>MessageRemoved</code></td>
                        <td>–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è</td>
                        <td>–ú–æ–¥–µ—Ä–∞—Ü–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ</td>
                    </tr>
                    <tr>
                        <td><code>@dp.message_callback</code></td>
                        <td><code>MessageCallback</code></td>
                        <td>–ù–∞–∂–∞—Ç–∏–µ callback-–∫–Ω–æ–ø–∫–∏</td>
                        <td>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã</td>
                    </tr>
                    <tr>
                        <td><code>@dp.bot_added</code></td>
                        <td><code>BotAdded</code></td>
                        <td>–ë–æ—Ç–∞ –¥–æ–±–∞–≤–∏–ª–∏ –≤ —á–∞—Ç</td>
                        <td>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</td>
                    </tr>
                    <tr>
                        <td><code>@dp.bot_removed</code></td>
                        <td><code>BotRemoved</code></td>
                        <td>–ë–æ—Ç–∞ —É–¥–∞–ª–∏–ª–∏ –∏–∑ —á–∞—Ç–∞</td>
                        <td>–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</td>
                    </tr>
                    <tr>
                        <td><code>@dp.user_added</code></td>
                        <td><code>UserAdded</code></td>
                        <td>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–±–∞–≤–∏–ª–∏ –≤ —á–∞—Ç</td>
                        <td>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</td>
                    </tr>
                    <tr>
                        <td><code>@dp.user_removed</code></td>
                        <td><code>UserRemoved</code></td>
                        <td>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–¥–∞–ª–∏–ª–∏ –∏–∑ —á–∞—Ç–∞</td>
                        <td>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</td>
                    </tr>
                    <tr>
                        <td><code>@dp.chat_title_changed</code></td>
                        <td><code>ChatTitleChanged</code></td>
                        <td>–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —á–∞—Ç–∞</td>
                        <td>–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π</td>
                    </tr>
                    <tr>
                        <td><code>@dp.errors</code></td>
                        <td><code>ErrorEvent</code></td>
                        <td>–û—à–∏–±–∫–∏ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö</td>
                        <td>–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</td>
                    </tr>
                </tbody>
            </table>

            <h3>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</h3>

            <h4>–¶–µ–ø–æ—á–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</h4>
            <div class="code-block">
                <span class="code-comment"># handlers/messages.py</span><br>
                <span class="code-keyword">from</span> maxapi <span class="code-keyword">import</span> Dispatcher<br>
                <span class="code-keyword">from</span> maxapi.filters <span class="code-keyword">import</span> F<br>
                <span class="code-keyword">from</span> maxapi.types <span class="code-keyword">import</span> MessageCreated<br>
                <br>
                dp = Dispatcher()<br>
                <br>
                <span class="code-comment"># –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥</span><br>
                @dp.<span class="code-function">message_created</span>(F.message.body.text.startswith(<span class="code-string">'/'</span>))<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">command_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;command = event.message.body.text.split()[0]<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> command == <span class="code-string">'/start'</span>:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!"</span>)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span>  <span class="code-comment"># –ü—Ä–µ—Ä—ã–≤–∞–µ–º —Ü–µ–ø–æ—á–∫—É</span><br>
                <br>
                <span class="code-comment"># –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (—Å—Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞)</span><br>
                @dp.<span class="code-function">message_created</span>(F.message.body.text)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">text_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">f"–í—ã –Ω–∞–ø–∏—Å–∞–ª–∏: {event.message.body.text}"</span>)
            </div>

            <h4>–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</h4>
            <div class="code-block">
                <span class="code-comment"># –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞</span><br>
                <span class="code-keyword">from</span> maxapi.filters <span class="code-keyword">import</span> F<br>
                <br>
                <span class="code-comment"># –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞</span><br>
                @dp.<span class="code-function">message_created</span>(F.message.body.text)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">handle_text</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;...<br>
                <br>
                <span class="code-comment"># –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</span><br>
                @dp.<span class="code-function">message_created</span>(F.message.attachments.photo)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">handle_photo</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;...<br>
                <br>
                <span class="code-comment"># –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</span><br>
                @dp.<span class="code-function">message_created</span>(F.message.attachments.file)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">handle_document</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;...
            </div>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä—ã -->
        <div id="filters" class="section">
            <h2>üîç –§–∏–ª—å—Ç—Ä—ã (MagicFilter)</h2>

            <h3>–ë–∞–∑–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã</h3>
            <div class="code-block">
                <span class="code-keyword">from</span> maxapi.filters <span class="code-keyword">import</span> F<br>
                <br>
                <span class="code-comment"># –§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–∫—Å—Ç—É</span><br>
                F.message.body.text<br>
                <br>
                <span class="code-comment"># –§–∏–ª—å—Ç—Ä –ø–æ –∫–æ–º–∞–Ω–¥–µ</span><br>
                F.message.body.text == <span class="code-string">"/start"</span><br>
                F.message.body.text.startswith(<span class="code-string">"/"</span>)<br>
                <br>
                <span class="code-comment"># –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —á–∞—Ç–∞</span><br>
                F.chat.type == <span class="code-string">"private"</span><br>
                F.chat.type == <span class="code-string">"group"</span><br>
                <br>
                <span class="code-comment"># –§–∏–ª—å—Ç—Ä –ø–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é</span><br>
                F.message.sender.is_bot == <span class="code-keyword">False</span><br>
                F.message.sender.id == 123456<br>
                <br>
                <span class="code-comment"># –§–∏–ª—å—Ç—Ä –ø–æ –≤–ª–æ–∂–µ–Ω–∏—è–º</span><br>
                F.message.attachments.photo<br>
                F.message.attachments.video<br>
                F.message.attachments.file
            </div>

            <h3>–ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤</h3>
            <div class="code-block">
                <span class="code-comment"># –õ–æ–≥–∏—á–µ—Å–∫–æ–µ –ò</span><br>
                (F.message.body.text) & (F.chat.type == <span class="code-string">"private"</span>)<br>
                <br>
                <span class="code-comment"># –õ–æ–≥–∏—á–µ—Å–∫–æ–µ –ò–õ–ò</span><br>
                (F.message.body.text == <span class="code-string">"/start"</span>) | (F.message.body.text == <span class="code-string">"/help"</span>)<br>
                <br>
                <span class="code-comment"># –û—Ç—Ä–∏—Ü–∞–Ω–∏–µ</span><br>
                ~F.message.sender.is_bot<br>
                <br>
                <span class="code-comment"># –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è</span><br>
                (F.message.body.text) & (F.chat.type == <span class="code-string">"private"</span>) & (~F.message.sender.is_bot)
            </div>

            <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã</h3>
            <div class="code-block">
                <span class="code-keyword">from</span> maxapi.filters <span class="code-keyword">import</span> Filter<br>
                <span class="code-keyword">from</span> maxapi.types <span class="code-keyword">import</span> MessageCreated<br>
                <br>
                <span class="code-keyword">class</span> <span class="code-class">IsAdmin</span>(Filter):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">__call__</span>(<span class="code-keyword">self</span>, event: MessageCreated) -> bool:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;admin_ids = [123456, 789012]  <span class="code-comment"># –°–ø–∏—Å–æ–∫ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> event.message.sender.id <span class="code-keyword">in</span> admin_ids<br>
                <br>
                <span class="code-keyword">class</span> <span class="code-class">HasPhoto</span>(Filter):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">__call__</span>(<span class="code-keyword">self</span>, event: MessageCreated) -> bool:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> bool(event.message.attachments <span class="code-keyword">and</span> <span class="code-keyword">any</span>(<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attr.type == <span class="code-string">"image"</span> <span class="code-keyword">for</span> attr <span class="code-keyword">in</span> event.message.attachments<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;))<br>
                <br>
                <span class="code-comment"># –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤</span><br>
                @dp.<span class="code-function">message_created</span>(IsAdmin() & HasPhoto())<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">admin_photo_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–ê–¥–º–∏–Ω –æ—Ç–ø—Ä–∞–≤–∏–ª —Ñ–æ—Ç–æ!"</span>)
            </div>

            <h3>–§–∏–ª—å—Ç—Ä—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</h3>
            <div class="code-block">
                <span class="code-keyword">from</span> typing <span class="code-keyword">import</span> List<br>
                <br>
                <span class="code-keyword">class</span> <span class="code-class">TextIn</span>(Filter):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">def</span> <span class="code-function">__init__</span>(<span class="code-keyword">self</span>, words: List[str]):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">self</span>.words = words<br>
                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">__call__</span>(<span class="code-keyword">self</span>, event: MessageCreated) -> bool:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = event.message.body.text.lower()<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-keyword">any</span>(word <span class="code-keyword">in</span> text <span class="code-keyword">for</span> word <span class="code-keyword">in</span> <span class="code-keyword">self</span>.words)<br>
                <br>
                <span class="code-comment"># –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</span><br>
                @dp.<span class="code-function">message_created</span>(TextIn([<span class="code-string">"–ø—Ä–∏–≤–µ—Ç"</span>, <span class="code-string">"–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π"</span>, <span class="code-string">"hello"</span>]))<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">greeting_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–ò —Ç–µ–±–µ –ø—Ä–∏–≤–µ—Ç! üëã"</span>)
            </div>
        </div>

        <!-- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç... -->
         <!-- –†–æ—É—Ç–µ—Ä—ã -->
        <div id="routers" class="section">
            <h2>üîÑ –†–æ—É—Ç–µ—Ä—ã</h2>

            <h3>–°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤</h3>
            <div class="code-block">
                <span class="code-keyword">from</span> maxapi <span class="code-keyword">import</span> Router<br>
                <span class="code-keyword">from</span> maxapi.filters <span class="code-keyword">import</span> F<br>
                <span class="code-keyword">from</span> maxapi.types <span class="code-keyword">import</span> MessageCreated<br>
                <br>
                <span class="code-comment"># –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥</span><br>
                user_router = Router()<br>
                <br>
                @user_router.<span class="code-function">message_created</span>(F.message.body.text == <span class="code-string">"/profile"</span>)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">profile_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å..."</span>)<br>
                <br>
                @user_router.<span class="code-function">message_created</span>(F.message.body.text == <span class="code-string">"/settings"</span>)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">settings_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–ù–∞—Å—Ç—Ä–æ–π–∫–∏..."</span>)<br>
                <br>
                <span class="code-comment"># –†–æ—É—Ç–µ—Ä –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥</span><br>
                admin_router = Router()<br>
                <br>
                @admin_router.<span class="code-function">message_created</span>(F.message.body.text == <span class="code-string">"/stats"</span>)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">stats_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞..."</span>)<br>
                <br>
                <span class="code-comment"># –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤ –∫ –≥–ª–∞–≤–Ω–æ–º—É –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É</span><br>
                dp.include_router(user_router)<br>
                dp.include_router(admin_router)
            </div>

            <h3>–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–æ—É—Ç–µ—Ä—ã</h3>
            <div class="code-block">
                <span class="code-comment"># –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä</span><br>
                main_router = Router()<br>
                <br>
                <span class="code-comment"># –ü–æ–¥—Ä–æ—É—Ç–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ–¥–∏–∞</span><br>
                media_router = Router()<br>
                <br>
                @media_router.<span class="code-function">message_created</span>(F.message.attachments.photo)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">photo_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ..."</span>)<br>
                <br>
                <span class="code-comment"># –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ—É—Ç–µ—Ä–∞ –≤ –≥–ª–∞–≤–Ω—ã–π</span><br>
                main_router.include_router(media_router)<br>
                <span class="code-comment"># –ò –∑–∞—Ç–µ–º –≤ –¥–∏—Å–ø–µ—Ç—á–µ—Ä</span><br>
                dp.include_router(main_router)
            </div>

            <h3>–§–∏–ª—å—Ç—Ä—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–æ—É—Ç–µ—Ä–æ–≤</h3>
            <div class="code-block">
                <span class="code-comment"># –†–æ—É—Ç–µ—Ä —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —á–∞—Ç–æ–≤</span><br>
                private_router = Router()<br>
                <br>
                <span class="code-comment"># –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ –∫–æ –≤—Å–µ–º—É —Ä–æ—É—Ç–µ—Ä—É</span><br>
                @private_router.<span class="code-function">message_created</span>(F.chat.type == <span class="code-string">"private"</span>)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">private_message_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–≠—Ç–æ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç"</span>)<br>
                <br>
                <span class="code-comment"># –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è –≤—Å–µ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞</span><br>
                group_router = Router()<br>
                group_router.message.filter(F.chat.type == <span class="code-string">"group"</span>)<br>
                <br>
                @group_router.<span class="code-function">message_created</span>()<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">group_message_handler</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–≠—Ç–æ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç"</span>)
            </div>
        </div>

        <!-- Middleware -->
        <div id="middleware" class="section">
            <h2>‚ö° Middleware</h2>

            <h3>–ë–∞–∑–æ–≤–æ–µ middleware</h3>
            <div class="code-block">
                <span class="code-keyword">from</span> maxapi <span class="code-keyword">import</span> BaseMiddleware<br>
                <span class="code-keyword">from</span> maxapi.types <span class="code-keyword">import</span> MessageCreated<br>
                <span class="code-keyword">import</span> time<br>
                <br>
                <span class="code-keyword">class</span> <span class="code-class">TimingMiddleware</span>(BaseMiddleware):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">__call__</span>(<span class="code-keyword">self</span>, handler, event, data):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_time = time.time()<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = <span class="code-keyword">await</span> handler(event, data)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end_time = time.time()<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="code-string">f"–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–Ω—è–ª–∞ {end_time - start_time:.2f} —Å–µ–∫—É–Ω–¥"</span>)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> result<br>
                <br>
                <span class="code-comment"># –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è middleware</span><br>
                dp.message.middleware.register(TimingMiddleware())
            </div>

            <h3>Middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</h3>
            <div class="code-block">
                <span class="code-keyword">class</span> <span class="code-class">AuthMiddleware</span>(BaseMiddleware):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">def</span> <span class="code-function">__init__</span>(<span class="code-keyword">self</span>, allowed_users: list):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">self</span>.allowed_users = allowed_users<br>
                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">__call__</span>(<span class="code-keyword">self</span>, handler, event, data):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> <span class="code-keyword">isinstance</span>(event, MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user_id = event.message.sender.id<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> user_id <span class="code-keyword">not</span> <span class="code-keyword">in</span> <span class="code-keyword">self</span>.allowed_users:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω"</span>)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span>  <span class="code-comment"># –ü—Ä–µ—Ä—ã–≤–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-keyword">await</span> handler(event, data)<br>
                <br>
                <span class="code-comment"># –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</span><br>
                auth_middleware = AuthMiddleware(allowed_users=[123456, 789012])<br>
                dp.message.middleware.register(auth_middleware)
            </div>

            <h3>Middleware –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤</h3>
            <div class="code-block">
                <span class="code-keyword">import</span> asyncio<br>
                <span class="code-keyword">from</span> collections <span class="code-keyword">import</span> defaultdict<br>
                <br>
                <span class="code-keyword">class</span> <span class="code-class">ThrottlingMiddleware</span>(BaseMiddleware):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">def</span> <span class="code-function">__init__</span>(<span class="code-keyword">self</span>, rate_limit: int = 5, period: int = 60):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">self</span>.rate_limit = rate_limit<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">self</span>.period = period<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">self</span>.users = defaultdict(list)<br>
                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">__call__</span>(<span class="code-keyword">self</span>, handler, event, data):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> <span class="code-keyword">isinstance</span>(event, MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user_id = event.message.sender.id<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = time.time()<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment"># –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">self</span>.users[user_id] = [t <span class="code-keyword">for</span> t <span class="code-keyword">in</span> <span class="code-keyword">self</span>.users[user_id] <span class="code-keyword">if</span> now - t &lt; <span class="code-keyword">self</span>.period]<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> len(<span class="code-keyword">self</span>.users[user_id]) &gt;= <span class="code-keyword">self</span>.rate_limit:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–¥–æ–∂–¥–∏—Ç–µ."</span>)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">self</span>.users[user_id].append(now)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-keyword">await</span> handler(event, data)<br>
                <br>
                <span class="code-comment"># –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 5 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É</span><br>
                throttling_middleware = ThrottlingMiddleware(rate_limit=5, period=60)<br>
                dp.message.middleware.register(throttling_middleware)
            </div>
        </div>

        <!-- –í–µ–±—Ö—É–∫–∏ -->
        <div id="webhook" class="section">
            <h2>üåê –í–µ–±—Ö—É–∫–∏</h2>

            <h3>–ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–∞</h3>
            <div class="code-block">
                <span class="code-keyword">from</span> maxapi <span class="code-keyword">import</span> Bot, Dispatcher<br>
                <span class="code-keyword">from</span> maxapi.types <span class="code-keyword">import</span> MessageCreated<br>
                <span class="code-keyword">import</span> logging<br>
                <br>
                logging.basicConfig(level=logging.INFO)<br>
                <br>
                bot = Bot(<span class="code-string">'YOUR_BOT_TOKEN'</span>)<br>
                dp = Dispatcher()<br>
                <br>
                @dp.<span class="code-function">message_created</span>()<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">handle_message</span>(event: MessageCreated):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> event.message.answer(<span class="code-string">"–ü—Ä–∏–≤–µ—Ç –æ—Ç –≤–µ–±—Ö—É–∫–∞!"</span>)<br>
                <br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">main</span>():<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment"># –ó–∞–ø—É—Å–∫ –≤–µ–±—Ö—É–∫–∞ –Ω–∞ localhost:8080</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> dp.handle_webhook(<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bot,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host=<span class="code-string">"0.0.0.0"</span>,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port=8080<br>
                &nbsp;&nbsp;&nbsp;&nbsp;)<br>
                <br>
                <span class="code-keyword">if</span> __name__ == <span class="code-string">"__main__"</span>:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">import</span> asyncio<br>
                &nbsp;&nbsp;&nbsp;&nbsp;asyncio.run(main())
            </div>

            <h3>–ö–∞—Å—Ç–æ–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–∞</h3>
            <div class="code-block">
                <span class="code-keyword">from</span> fastapi <span class="code-keyword">import</span> FastAPI, Request<br>
                <span class="code-keyword">from</span> fastapi.responses <span class="code-keyword">import</span> JSONResponse<br>
                <br>
                app = FastAPI()<br>
                <br>
                @app.post(<span class="code-string">"/webhook"</span>)<br>
                <span class="code-keyword">async</span> <span class="code-keyword">def</span> <span class="code-function">webhook_handler</span>(request: Request):<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">try</span>:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_data = <span class="code-keyword">await</span> request.json()<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event = <span class="code-keyword">await</span> process_update_webhook(update_data, bot)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> dp.handle(event)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> JSONResponse({<span class="code-string">"status"</span>: <span class="code-string">"ok"</span>})<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">except</span> Exception <span class="code-keyword">as</span> e:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.error(<span class="code-string">f"Webhook error: {e}"</span>)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> JSONResponse({<span class="code-string">"status"</span>: <span class="code-string">"error"</span>}, status_code=500)<br>
                <br>
                <span class="code-comment"># –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ uvicorn</span><br>
                <span class="code-comment"># uvicorn main:app --host 0.0.0.0 --port 8080</span>
            </div>
        </div>

        <!-- –î–µ–ø–ª–æ–π -->
        <div id="deployment" class="section">
            <h2>üöÄ –î–µ–ø–ª–æ–π</h2>

            <h3>Dockerfile –¥–ª—è –±–æ—Ç–∞</h3>
            <div class="code-block">
                <span class="code-comment"># Dockerfile</span><br>
                FROM python:3.11-slim<br>
                <br>
                WORKDIR /app<br>
                <br>
                COPY requirements.txt .<br>
                RUN pip install --no-cache-dir -r requirements.txt<br>
                <br>
                COPY . .<br>
                <br>
                ENV PYTHONPATH=/app<br>
                ENV PYTHONUNBUFFERED=1<br>
                <br>
                CMD [<span class="code-string">"python"</span>, <span class="code-string">"app/main.py"</span>]
            </div>

            <h3>docker-compose.yml</h3>
            <div class="code-block">
                <span class="code-comment"># docker-compose.yml</span><br>
                version: <span class="code-string">'3.8'</span><br>
                <br>
                services:<br>
                &nbsp;&nbsp;bot:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;build: .<br>
                &nbsp;&nbsp;&nbsp;&nbsp;container_name: max_bot<br>
                &nbsp;&nbsp;&nbsp;&nbsp;restart: unless-stopped<br>
                &nbsp;&nbsp;&nbsp;&nbsp;environment:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- BOT_TOKEN=${BOT_TOKEN}<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- WEBHOOK_URL=${WEBHOOK_URL}<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- REDIS_URL=redis://redis:6379<br>
                &nbsp;&nbsp;&nbsp;&nbsp;depends_on:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- redis<br>
                &nbsp;&nbsp;&nbsp;&nbsp;ports:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="code-string">"8080:8080"</span><br>
                <br>
                &nbsp;&nbsp;redis:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;image: redis:7-alpine<br>
                &nbsp;&nbsp;&nbsp;&nbsp;restart: unless-stopped<br>
                &nbsp;&nbsp;&nbsp;&nbsp;ports:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="code-string">"6379:6379"</span>
            </div>

            <h3>NGINX –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≤–µ–±—Ö—É–∫–∞</h3>
            <div class="code-block">
                <span class="code-comment"># /etc/nginx/sites-available/your_bot</span><br>
                server {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;listen 80;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;server_name yourdomain.com;<br>
                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;location /webhook {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass http://localhost:8080;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header Host $host;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header X-Real-IP $remote_addr;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header X-Forwarded-Proto $scheme;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;location / {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 404;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                }
            </div>

            <h3>Systemd —Å–µ—Ä–≤–∏—Å –¥–ª—è –±–æ—Ç–∞</h3>
            <div class="code-block">
                <span class="code-comment"># /etc/systemd/system/max-bot.service</span><br>
                [Unit]<br>
                Description=MAX Bot Service<br>
                After=network.target<br>
                <br>
                [Service]<br>
                Type=simple<br>
                User=botuser<br>
                WorkingDirectory=/opt/max-bot<br>
                Environment=BOT_TOKEN=your_token_here<br>
                Environment=PYTHONPATH=/opt/max-bot<br>
                ExecStart=/usr/bin/python3 -m app.main<br>
                Restart=always<br>
                RestartSec=10<br>
                <br>
                [Install]<br>
                WantedBy=multi-user.target
            </div>
        </div>

        <!-- –ú–µ—Ç–æ–¥—ã –±–æ—Ç–∞ -->
        <div id="bot-methods" class="section">
            <h2>ü§ñ –ú–µ—Ç–æ–¥—ã –±–æ—Ç–∞ (–ü–æ–ª–Ω—ã–π API Reference)</h2>

            <h3>–†–∞–±–æ—Ç–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏</h3>
            
            <div class="api-method">
                <h4>send_message</h4>
                <div class="api-signature">
                    async send_message(<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;chat_id: int = None,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;user_id: int = None,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;text: str,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;attachments: List[Attachment] = None,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;link: NewMessageLink = None,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;notify: bool = None,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;parse_mode: ParseMode = None<br>
                    ) -> SendedMessage
                </div>
                
                <table class="param-table">
                    <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–¢–∏–ø</th><th>–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                    <tr><td>chat_id</td><td>int</td><td>‚ùå*</td><td>ID —á–∞—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω user_id)</td></tr>
                    <tr><td>user_id</td><td>int</td><td>‚ùå*</td><td>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω chat_id)</td></tr>
                    <tr><td>text</td><td>str</td><td>‚úÖ</td><td>–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</td></tr>
                    <tr><td>attachments</td><td>List[Attachment]</td><td>‚ùå</td><td>–í–ª–æ–∂–µ–Ω–∏—è (—Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, —Ñ–∞–π–ª—ã)</td></tr>
                    <tr><td>link</td><td>NewMessageLink</td><td>‚ùå</td><td>–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ</td></tr>
                    <tr><td>notify</td><td>bool</td><td>‚ùå</td><td>–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</td></tr>
                    <tr><td>parse_mode</td><td>ParseMode</td><td>‚ùå</td><td>–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞</td></tr>
                </table>
                
                <div class="code-block">
                    <span class="code-comment"># –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</span><br>
                    message = <span class="code-keyword">await</span> bot.send_message(<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;chat_id=123456,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;text=<span class="code-string">"–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;parse_mode=ParseMode.HTML<br>
                    )<br>
                    print(<span class="code-string">f"–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å ID: {message.id}"</span>)
                </div>
            </div>

            <div class="api-method">
                <h4>edit_message</h4>
                <div class="api-signature">
                    async edit_message(<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;message_id: str,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;text: str = None,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;attachments: List[Attachment] = None,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;link: NewMessageLink = None,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;notify: bool = None,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;parse_mode: ParseMode = None<br>
                    ) -> EditedMessage
                </div>
            </div>

            <h3>–†–∞–±–æ—Ç–∞ —Å —á–∞—Ç–∞–º–∏</h3>
            
            <div class="method-grid">
                <div class="method-card">
                    <div class="method-name">get_chats(count=50, marker=None)</div>
                    <div class="method-desc">–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤</div>
                </div>
                <div class="method-card">
                    <div class="method-name">get_chat_by_id(chat_id)</div>
                    <div class="method-desc">–ü–æ–ª—É—á–∏—Ç—å —á–∞—Ç –ø–æ ID</div>
                </div>
                <div class="method-card">
                    <div class="method-name">edit_chat(chat_id, title=None, ...)</div>
                    <div class="method-desc">–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∞—Ç–∞</div>
                </div>
                <div class="method-card">
                    <div class="method-name">delete_chat(chat_id)</div>
                    <div class="method-desc">–£–¥–∞–ª–∏—Ç—å —á–∞—Ç</div>
                </div>
            </div>

            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏</h3>
            
            <div class="method-grid">
                <div class="method-card">
                    <div class="method-name">get_chat_members(chat_id)</div>
                    <div class="method-desc">–ü–æ–ª—É—á–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–∞—Ç–∞</div>
                </div>
                <div class="method-card">
                    <div class="method-name">add_chat_members(chat_id, user_ids)</div>
                    <div class="method-desc">–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>
                </div>
                <div class="method-card">
                    <div class="method-name">kick_chat_member(chat_id, user_id)</div>
                    <div class="method-desc">–ò—Å–∫–ª—é—á–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</div>
                </div>
                <div class="method-card">
                    <div class="method-name">get_me_from_chat(chat_id)</div>
                    <div class="method-desc">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ –≤ —á–∞—Ç–µ</div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —è–∫–æ—Ä—è–º
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞
        const sections = document.querySelectorAll('.section');
        const navLinks = document.querySelectorAll('.toc a');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (scrollY >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').slice(1) === current) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
