# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –û—à–∏–±–∫–∞ "table schedules has no column named timezone"

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞:
```
OperationalError: table schedules has no column named timezone
```

## üéØ –ü—Ä–∏—á–∏–Ω–∞

–°—Ç–∞—Ä–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`db.sqlite3`) –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ **–¥–æ** –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–∫–∏ `timezone`. –û–Ω–∞ –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –Ω–æ–≤–æ–µ –ø–æ–ª–µ –∏ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –°–ø–æ—Å–æ–± 1Ô∏è‚É£: –ë—ã—Å—Ç—Ä–æ (—É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ë–î)

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞ (Ctrl+C)

# 2. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ë–î
rm -f db.sqlite3 db.sqlite3-shm db.sqlite3-wal

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ —Å–Ω–æ–≤–∞
python main.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ë–î —Å–æ–∑–¥–∞—Å—Ç—Å—è –∑–∞–Ω–æ–≤–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π ‚úÖ

---

### –°–ø–æ—Å–æ–± 2Ô∏è‚É£: –° —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö (–¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î:

```bash
# –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É –≤—Ä—É—á–Ω—É—é
sqlite3 db.sqlite3 << EOF
ALTER TABLE schedules ADD COLUMN timezone VARCHAR(64) DEFAULT 'UTC';
EOF
```

---

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É schedules
sqlite3 db.sqlite3 "PRAGMA table_info(schedules);"

# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–æ–ª–æ–Ω–∫–∞ timezone:
# 7|timezone|VARCHAR(64)|0||0
```

---

## ‚úÖ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ë–î

### –¢–∞–±–ª–∏—Ü–∞ `schedules`
```
id              INTEGER
chat_id         VARCHAR(64)
user_id         VARCHAR(64)
text            TEXT
day_of_week     INT
time            VARCHAR(5)
timezone        VARCHAR(64)  ‚Üê –ù–û–í–ê–Ø –ö–û–õ–û–ù–ö–ê
enabled         INT
created_at      TIMESTAMP
updated_at      TIMESTAMP
```

### –¢–∞–±–ª–∏—Ü–∞ `user_settings`
```
id              INTEGER
user_id         VARCHAR(64)
chat_id         VARCHAR(64)
timezone        VARCHAR(64)
created_at      TIMESTAMP
updated_at      TIMESTAMP
```

---

## üöÄ –¢–µ–ø–µ—Ä—å –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!

–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫:

```bash
$ python main.py
INFO:root:Bot started...
INFO:dispatcher:Handlers registered
‚úÖ –ë–û–¢ –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï!
```

---

## üí° –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `core/models.py` - –º–æ–¥–µ–ª—å `Schedule` –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å `timezone` –ø–æ–ª–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `core/models.py` - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –º–æ–¥–µ–ª—å `UserSettings`
3. –£–¥–∞–ª–∏—Ç–µ –ë–î –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –µ—ë
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –±–æ—Ç–∞

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—è timezone —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!
